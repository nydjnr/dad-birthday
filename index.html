<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Happy 46th Birthday George Danquah</title>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;700&display=swap" rel="stylesheet">
<style>
:root{
  --gold:#d4af37;
  --soft-gold:#f3e6b3;
  --white:#ffffff;
}

body{
  margin:0;
  font-family:'Poppins', sans-serif;
  background:linear-gradient(135deg,#ffffff,#fdf6e3);
  color:#333;
  text-align:center;
  overflow-x:hidden;
}

h1,h2,h3{
  color:var(--gold);
  margin:10px 0;
}

.cake-wrapper{
  position:relative;
  width:220px;
  margin:30px auto;
}

.cake-body{
  width:220px;
  height:120px;
  background:linear-gradient(var(--white),var(--soft-gold));
  border-radius:0 0 25px 25px;
  box-shadow:0 10px 30px rgba(0,0,0,0.15);
  display:flex;
  align-items:center;
  justify-content:center;
  font-weight:bold;
  font-size:32px;
  color:var(--gold);
}

.candles{
  position:absolute;
  top:-55px;
  width:100%;
  display:flex;
  justify-content:space-around;
}

.candle{
  width:14px;
  height:45px;
  background:white;
  border-radius:5px;
  position:relative;
}

.flame{
  width:16px;
  height:16px;
  background:orange;
  border-radius:50%;
  position:absolute;
  top:-18px;
  left:-1px;
  box-shadow:0 0 15px orange;
  animation:flicker .2s infinite;
}

@keyframes flicker{
  0%{opacity:1; transform:scale(1);}
  50%{opacity:0.7; transform:scale(1.1);}
  100%{opacity:1; transform:scale(1);}
}

#cakeText{
  margin-top:15px;
  font-size:18px;
  color:#333;
}

/* Confetti styles */
.confetti-piece{
  position:absolute;
  width:8px;
  height:8px;
  background:var(--gold);
  opacity:0.9;
  top:0;
  animation:fall 3s linear forwards;
}

@keyframes fall{
  0%{transform:translateY(0) rotate(0deg);}
  100%{transform:translateY(400px) rotate(360deg);}
}

audio{
  margin-top:15px;
  width:260px;
  outline:none;
  border-radius:10px;
}
</style>
</head>
<body>
<h1>Happy 46th Birthday George Danquah!</h1>
<h2>Make a wish and enjoy your special day üéâ</h2>

<!-- Cake -->
<div class="cake-wrapper">
  <div class="candles">
    <div class="candle"><div class="flame"></div></div>
    <div class="candle"><div class="flame"></div></div>
    <div class="candle"><div class="flame"></div></div>
    <div class="candle"><div class="flame"></div></div>
  </div>

  <div class="cake-body">46</div>
</div>

<p id="cakeText">Tap anywhere to start the music and blow into the mic üé§</p>

<!-- Audio -->
<audio id="birthdaySong">
  <source src="birthday.mp3" type="audio/mpeg">
</audio>

<script>
let started = false;

document.body.addEventListener("click", async () => {
  if(started) return;
  started = true;

  // Start music
  const song = document.getElementById("birthdaySong");
  song.volume = 0.8;
  song.play().catch(()=>{});

  // Start mic
  try{
    const stream = await navigator.mediaDevices.getUserMedia({ audio:true });
    const audioContext = new AudioContext();
    const mic = audioContext.createMediaStreamSource(stream);
    const analyser = audioContext.createAnalyser();
    mic.connect(analyser);

    const data = new Uint8Array(analyser.frequencyBinCount);
    let blown = false;

    function detect(){
      analyser.getByteFrequencyData(data);
      const volume = data.reduce((a,b)=>a+b)/data.length;

      if(volume > 40 && !blown){
        blown = true;

        // Blow out candles
        document.querySelectorAll(".flame").forEach(f=>{
          f.style.display="none";
        });

        // Birthday message
        document.getElementById("cakeText").innerHTML =
          "üéâ <strong>Happy 46th Birthday George Danquah!</strong> üéâ<br>Make a wish ü§ç";

        // Confetti
        for(let i=0;i<50;i++){
          const confetti = document.createElement("div");
          confetti.classList.add("confetti-piece");
          confetti.style.left = Math.random()*window.innerWidth+"px";
          confetti.style.background = i%2===0?"#d4af37":"#f3e6b3";
          document.body.appendChild(confetti);
          setTimeout(()=>{ confetti.remove() },4000);
        }

        return;
      }
      requestAnimationFrame(detect);
    }
    detect();
  }catch{
    document.getElementById("cakeText").innerText =
      "Please allow microphone access üé§";
  }
});
</script>
</body>
</html>
